---
title: Jemeter 入门笔记
---
## 线程组
线程组，可以看作是一个虚拟的用户组(模拟的测试用户), Jmeter 创建线程组有三个选项分别为：setUp Thread Group、Thread Group、tearDown Thread Group 其中的 setUp 和 tearDown 用于处理线程的前置初始化和后置结束处理，就相当 Junit 的中的 setUp 和 tearDown 一样。
### 线程组的部分参数说明
1、Ramp-up： 指定所有线程启动需要的总时间，是线程启动间隔相加，不如设置值为100秒有10个线程数，那个每一个线程的启动时间间隔为10秒，即每一个相对于前一个线程延时10秒启动
2、循环次数：指的线程组运行的次数, 默认永远一直执行的，要指定循环的次数，不然测试线程组会一直循环运行
3、调度器(Scheduler)，开始时间(Start Time)线程组执行的开始时间，结束时间(End Time)线程组执行的结束时间，持续时间(Duration)指定测试计划的持续总时间会覆盖结束时间，延迟时间(Start Delay)会覆盖开始时间。

## 取样器
取样器可以看作是一个没有界面的浏览器，取样器只有在线程中才能添加
1、取样器：用于发送 Http 、WebService、JDBC、Java 等构造的请求
2、取样器的断言：断言看作是异常处理的一种高级形式，判断是否符合某个指定的值，不符合抛出异常
3、取样器的监听器：用于展示结果，如查看结果树、查看每次的请求和响应
4、取样器的前置处理器：发送请求前要做环境或者数据准备
5、取样器的后置处理器：请求响应后可以处理响应的结果,如果返回的是 JSON 使用 $ 作为根元素取值
6、取样器的配置元件：用于设置取样器的头部之类的信息，如 HTTP 设置参数或请求头

### JSON 取值器参数介绍
获取请求结果返回值时使用 $ 作为根元素
1、names of created variables ：接收值的变量名，多个变量时用分号分隔，提取的变量可以用作请求的参数使用的格式为 ${变量名}
2、json path： json path表达式，也是用分号分隔
3、atch no：0随机; n取第几个匹配值；-1匹配所有，后续引用用变量名_N 取第N个值
4、default values： 缺省值，匹配不到值的时候取该值



## 逻辑控制器
逻辑控制器和取样器一样只能在线程组中添加，逻辑控制器就是条件控制器
1、if 控制逻辑控制器：用于判断某个值是否为真如果为真则执行 if 逻辑控制器中的元件和取样器
2、仅一次逻辑控制器：表示线程组设置的次数大于或者设置为永远时，该控制器中的取样器及其他元件都是只运行一次


## 全局变量
1、全局变量的设置：`${__setProperty(varName,varValue,)}`
2、全局变量的引用：`${__P{varName}}`


## Jemter 元件的执行顺序
取样器和逻辑控制器是顺序执行的，其他元件会在取样器执行的特定期间执行，不由创建的顺序决定，且会继承，子的元件会覆盖父级的元件设置，并且所有的取样器都会应用父级的元件，如下面的例子：
```
-逻辑控制器
--后置处理器01
--取样器01
--取样器02
--定时器01
--断言01
--前置处理器01
--定时器02
--后置处理器02

运行的执行顺序如下(取样器的会共享使用同级别或者父级的定时、处理器、断言)：

前置处理器01
定时器01
定时器02
取样器01(因为取样器01的顺序第一所以先运行)
后置处理器01
后置处理器02
断言01

前置处理器01
定时器01
定时器02
取样器02(顺序第二所以运行顺序第二)
后置处理器01
后置处理器02
断言01


```

## 汇总报告字段说明
Label：取样器名称
Samples：发送的请求总数
Average：平均响应时间
Min：最小响应时间
Max：最大响应时间
Std.Dev.：所有请求响应时间的标准差
Error%：出错率（出错的request数/所有的request数）
Throughput：吞吐量，每秒/每分钟（具体看单位）处理的request数
Received KB/sec：每秒从服务器端接收到的数据量
Avg.Bytes：服务端返回给request数据的平均值，可以理解为：服务端返回所有数据/请求数